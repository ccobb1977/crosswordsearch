<!doctype html>
<html charset="utf-8" ng-app="crwApp">
<head>
    <title>Crossword</title>
    <meta charset="UTF-8">
    <script type="text/javascript" src="../plugin/js/angular.js"></script>
    <script type="text/javascript" src="../plugin/js/angular-sanitize.min.js"></script>
    <script type='text/javascript'>
/* <![CDATA[ */
var crwBasics = {"locale":{"down-right":"rechts unten","up-left":"oben links","up-right":"oben rechts","down-left":"unten links","down":"unten","up":"oben","right":"rechts","left":"links"},"letterDist":{"A":6,"B":2,"C":3,"D":5,"E":17,"F":1,"G":3,"H":4,"I":7,"J":1,"K":1,"L":3,"M":2,"N":10,"O":2,"P":1,"Q":1,"R":7,"S":8,"T":6,"U":4,"V":1,"W":2,"X":1,"Y":1,"Z":1},"letterRegEx":"[a-zA-Z]","pluginPath":"../plugin/"};
/* ]]> */
    </script>
    <script type="text/javascript" src="../plugin/js/qantic.angularjs.stylemodel.js"></script>
    <script type="text/javascript" src="../src/js/customSelectElement.js"></script>
    <script type="text/javascript" src="../src/js/basics.js"></script>
    <script type="text/javascript" src="../src/js/crosswordFactory.js"></script>
    <script type="text/javascript" src="../src/js/markerFactory.js"></script>
    <script type="text/javascript" src="../src/js/CrosswordController.js"></script>
    <script type="text/javascript" src="../src/js/SizeController.js"></script>
    <script type="text/javascript" src="../src/js/TableController.js"></script>
    <script type="text/javascript" src="../src/js/WordController.js"></script>
    <link rel="stylesheet" type="text/css" href="../plugin/css/crosswordsearch.css"></link>
</head>
<body ng-controller="CrosswordController">
    <div class="crw-crossword wide" ng-controller="SizeController">
        <div class="crw-grid divider" ng-style="styleGridSize()">
            <div ng-mousedown="startResize()">
                <div id="handle-left" transform-multi-style style-name="size-left" ng-style="modLeft.styleObject['handle-left'].style"></div>
                <div id="handle-top" transform-multi-style style-name="size-top" ng-style="modTop.styleObject['handle-top'].style"></div>
                <div id="handle-right" transform-multi-style style-name="size-right" ng-style="modRight.styleObject['handle-right'].style"></div>
                <div id="handle-bottom" transform-multi-style style-name="size-bottom" ng-style="modBottom.styleObject['handle-bottom'].style"></div>
            </div>
        </div>
        <div class="crw-mask" ng-style="styleGridSize()">
        <table class="crw-table" ng-style="styleShift()" ng-controller="TableController" ng-Init="setMode('build')" crw-catch-dragging>
        <tr ng-repeat="row in crosswordData.content" crw-index-checker="line">
            <td class="crw-field" ng-repeat="field in row" crw-index-checker="column">
                <div ng-click="activate(line, column)" ng-mouseenter="intoField(line, column)" ng-mouseleave="outofField(line, column)">
                    <button tabindex="-1" unselectable="on" ng-keypress="type($event)" crw-set-focus>{{field.letter}}</button>
                    <div unselectable="on" ng-repeat="marker in getMarks(line, column)" class="crw-marked" ng-class ="getImgClass(marker)"></div>
                </div>
            </td>
        </tr>
        </table>
        </div>
    </div>
    <div id="crw-controls" ng-controller="WordController" ng-switch on="immediate">
        <p>Felder: <button ng-click="randomize()" title="Leere Felder mit zufälligen Buchstaben auffüllen">Auffüllen</button><button ng-click="empty()" title="Alle Felder leeren">Leeren</button></button><button ng-click="save()">Testausgabe</button></p>
        <ul class="crw-word">
            <li ng-class="{'highlight': isHighlighted(word.id)}" ng-repeat="word in wordsToArray(crosswordData.words) | orderBy:'id'" ng-controller="EntryController">
                <dl class="cse" cse-select cse-options="colors" cse-model="word.color">
                </dl>
                <span>{{word.fields | joinWord}} (von Zeile {{word.start.x + 1}}, Spalte {{word.start.y + 1}} nach {{localizeDirection(word.direction)}})</span>
                <button ng-click="deleteWord(word.id)">Löschen</button>
            </li>
        </ul>
        <div class="crw-immediate" ng-if="immediate"></div>
        <div ng-switch-when="invalidWords">
            <p ng-pluralize count="invalidCount" when="{
                'one': 'Das markierte Wort passt nicht mehr vollständig in das Rätselfeld. Um die Größe anzupassen, muss es gelöscht werden.',
                'other': 'Die markierten Wörter passen nicht mehr vollständig in das Rätselfeld. Um die Größe anzupassen, müssen sie gelöscht werden.'}"></p>
            <p class="actions">
                <button ng-click="deleteInvalid()">Löschen</button>
                <button ng-click="abortInvalid()">Abbrechen</button>
            </p>
        </div>
        <div ng-switch-when="saveCrossword">
            <form name="uploader">
                <p>Zum Speichern muss das Rätsel einen Namen erhalten (mindestens 4 Buchstaben):</p>
                <p class="actions">
                    <input type="text" ng-model="crosswordData.name" name="name" required="" ng-minlength="4">
                    <button ng-disabled="!uploader.name.$valid" ng-click="upload()">Speichern</button>
                </p>
                <p class="error" ng-show="uploader.name.$error.required">Ein Name muss angegeben werden!</p>
                <p class="error" ng-show="uploader.name.$error.minlength">Der Name ist zu kurz!</p>
                <p class="confirm" ng-show="uploader.name.$valid">So geht's!</p>
            </form>
        </div>
    </div>
</body>
</html>
